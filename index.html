<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wealth Command Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#4361EE">
  <meta name="description" content="Advanced personal finance management with AI insights">
  
  <meta name="google-signin-client_id" content="86191691449-lop8lu293h8956071sr0jllc2qsdpc2e.apps.googleusercontent.com">
  
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" as="style">
  <link rel="preload" href="styles.css" as="style">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
  
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <div id="loadingScreen" class="loading-screen">
    <div class="loading-content">
      <lottie-player 
        src="https://assets1.lottiefiles.com/packages/lf20_tsjcpq4z.json" 
        background="transparent" 
        speed="1" 
        style="width: 120px; height: 120px;" 
        autoplay
        loop>
      </lottie-player>
      <h3 class="mt-3 text-gradient">Wealth Command Pro</h3>
      <p class="text-muted">Loading your financial dashboard...</p>
    </div>
  </div>

  <div id="voiceInterface" class="voice-interface d-none">
    <div class="voice-modal">
      <div class="voice-header">
        <i class="bi bi-mic-fill voice-icon"></i>
        <h5>Voice Command</h5>
        <button class="btn-close voice-close" onclick="hideVoiceInterface()"></button>
      </div>
      <div class="voice-body">
        <div class="voice-visualizer">
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
        </div>
        <p class="voice-instruction">Say something like "Add income of 5000 from salary"</p>
        <div id="voiceTranscript" class="voice-transcript"></div>
      </div>
      <div class="voice-footer">
        <button class="btn btn-primary btn-lg voice-action-btn" onclick="toggleVoiceRecognition()">
          <i class="bi bi-mic"></i> Start Listening
        </button>
      </div>
    </div>
  </div>

  <nav class="navbar navbar-glass">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <div class="brand-logo">
          <i class="bi bi-graph-up-arrow"></i>
        </div>
        <span class="brand-text">Wealth Command</span>
        <span class="badge badge-pro">PRO</span>
      </a>
      
      <div class="navbar-controls">
        <button class="btn-navbar btn-voice" onclick="showVoiceInterface()" title="Voice Commands">
          <i class="bi bi-mic"></i>
        </button>
        
        <div class="sync-status" data-bs-toggle="tooltip" data-bs-placement="bottom" 
             title="Sync status" id="syncStatusTooltip">
          <i class="bi" id="syncStatusIcon"></i>
        </div>
        
        <div class="dropdown quick-actions">
          <button class="btn-navbar" data-bs-toggle="dropdown">
            <i class="bi bi-lightning"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#" onclick="quickAddTransaction('income')">
              <i class="bi bi-plus-circle text-success"></i> Quick Income
            </a></li>
            <li><a class="dropdown-item" href="#" onclick="quickAddTransaction('expense')">
              <i class="bi bi-dash-circle text-danger"></i> Quick Expense
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" onclick="showFullAIAnalysis()">
              <i class="bi bi-robot"></i> AI Analysis
            </a></li>
            <li><a class="dropdown-item" href="#" onclick="manualSync()">
              <i class="bi bi-cloud-arrow-up"></i> Sync Now
            </a></li>
          </ul>
        </div>
        
        <div class="dropdown profile-menu">
          <button class="btn-profile" data-bs-toggle="dropdown">
            <div id="profilePicture" class="profile-pic-container">
              <i class="bi bi-person-circle profile-icon"></i>
            </div>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li id="signedInUser" class="dropdown-item-text d-none">
              <small class="text-muted">Signed in as:</small>
              <div id="userEmail" class="fw-bold"></div>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li id="signInOption">
              <a class="dropdown-item" href="#" onclick="showGoogleSignIn()">
                <i class="bi bi-google me-2"></i>Sign in with Google
              </a>
            </li>
            <li id="signOutOption" class="d-none">
              <a class="dropdown-item" href="#" onclick="googleSignOut()">
                <i class="bi bi-box-arrow-right me-2"></i>Sign out
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item" href="#" onclick="showAchievements()">
                <i class="bi bi-trophy me-2"></i>Achievements
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="#" onclick="exportFinancialReport()">
                <i class="bi bi-file-earmark-pdf me-2"></i>Export Report
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div class="toast-container" id="toastContainer"></div>

  <div id="confettiContainer" class="confetti-container"></div>

  <div class="main-content container-fluid">
    <div class="tab-system">
      <div id="tab-dashboard" class="tab-page active">
        <div class="row g-4">
            <div class="col-md-4">
                <div class="summary-card">
                    <div class="summary-icon" style="background-color: #4361EE20; color: #4361EE;"><i class="bi bi-wallet2"></i></div>
                    <div class="summary-content">
                        <div class="summary-label">Net Wealth</div>
                        <div class="summary-value" id="netWealth">PKR 0</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="summary-card">
                    <div class="summary-icon" style="background-color: #10B98120; color: #10B981;"><i class="bi bi-arrow-down-circle"></i></div>
                    <div class="summary-content">
                        <div class="summary-label">Monthly Income</div>
                        <div class="summary-value" id="totalIncome">PKR 0</div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="summary-card">
                    <div class="summary-icon" style="background-color: #EF476F20; color: #EF476F;"><i class="bi bi-arrow-up-circle"></i></div>
                    <div class="summary-content">
                        <div class="summary-label">Monthly Expenses</div>
                        <div class="summary-value" id="totalExpense">PKR 0</div>
                    </div>
                </div>
            </div>

            <div class="col-lg-7">
                <div class="chart-card">
                    <h5 class="card-title">Income vs. Expense Trend</h5>
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="chart-card">
                    <h5 class="card-title">Spending Categories</h5>
                    <canvas id="spendingChart"></canvas>
                </div>
            </div>

            <div class="col-12">
                <div class="ai-insights-card">
                    <h5 class="card-title"><i class="bi bi-robot"></i> AI Insights</h5>
                    <div id="aiInsightsContainer">
                        <div class="text-center text-muted p-3">Analyzing your data for insights...</div>
                    </div>
                </div>
            </div>
        </div>
      </div>

      <div id="tab-transactions" class="tab-page">
        <div class="transactions-header">
            <h3>Transactions</h3>
            <div class="filters">
                <input type="text" id="transactionSearch" class="form-control" placeholder="Search...">
                <select id="transactionTypeFilter" class="form-select">
                    <option value="all">All Types</option>
                    <option value="income">Income</option>
                    <option value="expense">Expense</option>
                </select>
                <select id="transactionCategoryFilter" class="form-select">
                    <option value="all">All Categories</option>
                    </select>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Description</th>
                        <th>Category</th>
                        <th>Type</th>
                        <th>Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="transactionsBody">
                    </tbody>
            </table>
        </div>
      </div>

      <div id="tab-planner" class="tab-page">
        </div>

      <div id="tab-debt" class="tab-page">
        </div>

      <div id="tab-analytics" class="tab-page">
        <div class="row g-4">
            <div class="col-12">
                <h3>Financial Analytics</h3>
            </div>
            <div class="col-lg-6">
                <div class="chart-card">
                    <h5 class="card-title">Financial Health Trend</h5>
                    <canvas id="healthTrendChart"></canvas>
                </div>
            </div>
            <div class="col-lg-6">
                 <div class="chart-card">
                    <h5 class="card-title">Category Breakdown (All Time)</h5>
                    <canvas id="categoryBreakdownChart"></canvas>
                </div>
            </div>
        </div>
      </div>

      <div id="tab-settings" class="tab-page">
        <div class="settings-container">
            <h3>Settings</h3>
            <div class="settings-card">
                <h5>Appearance</h5>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="themeSwitch">
                  <label class="form-check-label" for="themeSwitch">Dark Mode</label>
                </div>
            </div>
             <div class="settings-card">
                <h5>Data Management</h5>
                <button class="btn btn-outline-primary" onclick="exportFinancialReport()">Export Report (PDF)</button>
                <button class="btn btn-outline-secondary" onclick="manualSync()">Sync Data Now</button>
            </div>
            <div class="settings-card">
                <h5>Categories</h5>
                <div id="categoriesList">
                    </div>
            </div>
        </div>
      </div>
    </div>
  </div>

  <button class="fab btn-fab-primary" id="mainFAB" onclick="showQuickActionMenu()">
    <i class="bi bi-plus-lg"></i>
  </button>

  <div class="fab-menu" id="fabMenu">
    <button class="fab-option btn-fab-success" onclick="quickAddTransaction('income')" data-tooltip="Add Income">
      <i class="bi bi-arrow-down-circle"></i>
    </button>
    <button class="fab-option btn-fab-danger" onclick="quickAddTransaction('expense')" data-tooltip="Add Expense">
      <i class="bi bi-arrow-up-circle"></i>
    </button>
    <button class="fab-option btn-fab-info" onclick="showVoiceInterface()" data-tooltip="Voice Command">
      <i class="bi bi-mic"></i>
    </button>
    <button class="fab-option btn-fab-warning" onclick="showFullAIAnalysis()" data-tooltip="AI Insights">
      <i class="bi bi-robot"></i>
    </button>
  </div>

  <nav class="bottom-nav navbar-glass">
    <div class="nav-container">
      <button class="nav-btn active" data-tab="dashboard" onclick="showTab('dashboard')">
        <div class="nav-icon">
          <i class="bi bi-house-door"></i>
        </div>
        <span class="nav-label">Dashboard</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="transactions" onclick="showTab('transactions')">
        <div class="nav-icon">
          <i class="bi bi-list-ul"></i>
        </div>
        <span class="nav-label">Transactions</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="planner" onclick="showTab('planner')">
        <div class="nav-icon">
          <i class="bi bi-calendar-check"></i>
        </div>
        <span class="nav-label">Planner</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="debt" onclick="showTab('debt')">
        <div class="nav-icon">
          <i class="bi bi-cash-coin"></i>
        </div>
        <span class="nav-label">Debt</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="analytics" onclick="showTab('analytics')">
        <div class="nav-icon">
          <i class="bi bi-bar-chart"></i>
        </div>
        <span class="nav-label">Analytics</span>
        <div class="nav-indicator"></div>
      </button>
    </div>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script src="js/core/state-manager.js"></script>
  <script src="js/core/ai-engine.js"></script>
  <script src="js/core/analytics-engine.js"></script>
  <script src="js/core/sync-engine.js"></script>
  
  <script src="js/features/transactions.js"></script>
  <script src="js/features/categories.js"></script>
  <script src="js/features/planner.js"></script>
  <script src="js/features/debt.js"></script>
  <script src="js/features/analytics.js"></script>
  <script src="js/features/voice-commands.js"></script>
  <script src="js/features/notifications.js"></script>
  
  <script src="js/ui/charts.js"></script>
  <script src="js/ui/animations.js"></script>
  <script src="js/ui/modals.js"></script>
  <script src="js/ui/toasts.js"></script>
  
  <script src="js/utils/helpers.js"></script>
  <script src="js/utils/formatters.js"></script>
  <script src="js/utils/validators.js"></script>
  
  <script src="js/app.js"></script>
</body>
</html>

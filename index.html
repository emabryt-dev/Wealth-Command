<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wealth Command Pro</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#4361EE">
  <meta name="description" content="Advanced personal finance management with AI insights">
  
  <!-- Google Sign-In Meta -->
  <meta name="google-signin-client_id" content="86191691449-lop8lu293h8956071sr0jllc2qsdpc2e.apps.googleusercontent.com">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" as="style">
  <link rel="preload" href="styles.css" as="style">
  
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  
  <!-- Lottie Animations -->
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
  
  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen">
    <div class="loading-content">
      <lottie-player 
        src="https://assets1.lottiefiles.com/packages/lf20_tsjcpq4z.json" 
        background="transparent" 
        speed="1" 
        style="width: 120px; height: 120px;" 
        autoplay
        loop>
      </lottie-player>
      <h3 class="mt-3 text-gradient">Wealth Command Pro</h3>
      <p class="text-muted">Loading your financial dashboard...</p>
    </div>
  </div>

  <!-- Voice Command Interface -->
  <div id="voiceInterface" class="voice-interface d-none">
    <div class="voice-modal">
      <div class="voice-header">
        <i class="bi bi-mic-fill voice-icon"></i>
        <h5>Voice Command</h5>
        <button class="btn-close voice-close" onclick="hideVoiceInterface()"></button>
      </div>
      <div class="voice-body">
        <div class="voice-visualizer">
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
          <div class="voice-bar"></div>
        </div>
        <p class="voice-instruction">Say something like "Add income of 5000 from salary"</p>
        <div id="voiceTranscript" class="voice-transcript"></div>
      </div>
      <div class="voice-footer">
        <button class="btn btn-primary btn-lg voice-action-btn" onclick="toggleVoiceRecognition()">
          <i class="bi bi-mic"></i> Start Listening
        </button>
      </div>
    </div>
  </div>

  <!-- Enhanced Top Navbar -->
  <nav class="navbar navbar-glass">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <div class="brand-logo">
          <i class="bi bi-graph-up-arrow"></i>
        </div>
        <span class="brand-text">Wealth Command</span>
        <span class="badge badge-pro">PRO</span>
      </a>
      
      <div class="navbar-controls">
        <!-- Voice Command Trigger -->
        <button class="btn-navbar btn-voice" onclick="showVoiceInterface()" title="Voice Commands">
          <i class="bi bi-mic"></i>
        </button>
        
        <!-- Sync Status -->
        <div class="sync-status" data-bs-toggle="tooltip" data-bs-placement="bottom" 
             title="Sync status" id="syncStatusTooltip">
          <i class="bi" id="syncStatusIcon"></i>
        </div>
        
        <!-- Quick Actions Menu -->
        <div class="dropdown quick-actions">
          <button class="btn-navbar" data-bs-toggle="dropdown">
            <i class="bi bi-lightning"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#" onclick="quickAddTransaction('income')">
              <i class="bi bi-plus-circle text-success"></i> Quick Income
            </a></li>
            <li><a class="dropdown-item" href="#" onclick="quickAddTransaction('expense')">
              <i class="bi bi-dash-circle text-danger"></i> Quick Expense
            </a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" onclick="showFullAIAnalysis()">
              <i class="bi bi-robot"></i> AI Analysis
            </a></li>
            <li><a class="dropdown-item" href="#" onclick="manualSync()">
              <i class="bi bi-cloud-arrow-up"></i> Sync Now
            </a></li>
          </ul>
        </div>
        
        <!-- Profile Menu -->
        <div class="dropdown profile-menu">
          <button class="btn-profile" data-bs-toggle="dropdown">
            <div id="profilePicture" class="profile-pic-container">
              <i class="bi bi-person-circle profile-icon"></i>
            </div>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li id="signedInUser" class="dropdown-item-text d-none">
              <small class="text-muted">Signed in as:</small>
              <div id="userEmail" class="fw-bold"></div>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li id="signInOption">
              <a class="dropdown-item" href="#" onclick="showGoogleSignIn()">
                <i class="bi bi-google me-2"></i>Sign in with Google
              </a>
            </li>
            <li id="signOutOption" class="d-none">
              <a class="dropdown-item" href="#" onclick="googleSignOut()">
                <i class="bi bi-box-arrow-right me-2"></i>Sign out
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item" href="#" onclick="showAchievements()">
                <i class="bi bi-trophy me-2"></i>Achievements
              </a>
            </li>
            <li>
              <a class="dropdown-item" href="#" onclick="exportFinancialReport()">
                <i class="bi bi-file-earmark-pdf me-2"></i>Export Report
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Confetti Container -->
  <div id="confettiContainer" class="confetti-container"></div>

  <!-- Main Content -->
  <div class="main-content container-fluid">
    <!-- Enhanced Tab System -->
    <div class="tab-system">
      <!-- Dashboard Tab -->
      <div id="tab-dashboard" class="tab-page active">
        <!-- Dashboard content will be loaded here -->
      </div>

      <!-- Transactions Tab -->
      <div id="tab-transactions" class="tab-page">
        <!-- Transactions content will be loaded here -->
      </div>

      <!-- Planner Tab -->
      <div id="tab-planner" class="tab-page">
        <!-- Planner content will be loaded here -->
      </div>

      <!-- Debt Tab -->
      <div id="tab-debt" class="tab-page">
        <!-- Debt content will be loaded here -->
      </div>

      <!-- Analytics Tab -->
      <div id="tab-analytics" class="tab-page">
        <!-- Analytics content will be loaded here -->
      </div>

      <!-- Settings Tab -->
      <div id="tab-settings" class="tab-page">
        <!-- Settings content will be loaded here -->
      </div>
    </div>
  </div>

  <!-- Floating Action Button -->
  <button class="fab btn-fab-primary" id="mainFAB" onclick="showQuickActionMenu()">
    <i class="bi bi-plus-lg"></i>
  </button>

  <!-- Quick Action Menu -->
  <div class="fab-menu" id="fabMenu">
    <button class="fab-option btn-fab-success" onclick="quickAddTransaction('income')" data-tooltip="Add Income">
      <i class="bi bi-arrow-down-circle"></i>
    </button>
    <button class="fab-option btn-fab-danger" onclick="quickAddTransaction('expense')" data-tooltip="Add Expense">
      <i class="bi bi-arrow-up-circle"></i>
    </button>
    <button class="fab-option btn-fab-info" onclick="showVoiceInterface()" data-tooltip="Voice Command">
      <i class="bi bi-mic"></i>
    </button>
    <button class="fab-option btn-fab-warning" onclick="showFullAIAnalysis()" data-tooltip="AI Insights">
      <i class="bi bi-robot"></i>
    </button>
  </div>

  <!-- Enhanced Bottom Navigation -->
  <nav class="bottom-nav navbar-glass">
    <div class="nav-container">
      <button class="nav-btn active" data-tab="dashboard" onclick="showTab('dashboard')">
        <div class="nav-icon">
          <i class="bi bi-house-door"></i>
        </div>
        <span class="nav-label">Dashboard</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="transactions" onclick="showTab('transactions')">
        <div class="nav-icon">
          <i class="bi bi-list-ul"></i>
        </div>
        <span class="nav-label">Transactions</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="planner" onclick="showTab('planner')">
        <div class="nav-icon">
          <i class="bi bi-calendar-check"></i>
        </div>
        <span class="nav-label">Planner</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="debt" onclick="showTab('debt')">
        <div class="nav-icon">
          <i class="bi bi-cash-coin"></i>
        </div>
        <span class="nav-label">Debt</span>
        <div class="nav-indicator"></div>
      </button>

      <button class="nav-btn" data-tab="analytics" onclick="showTab('analytics')">
        <div class="nav-icon">
          <i class="bi bi-bar-chart"></i>
        </div>
        <span class="nav-label">Analytics</span>
        <div class="nav-indicator"></div>
      </button>
    </div>
  </nav>

  <!-- All Modals will be dynamically loaded -->

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.0/dist/chartjs-plugin-zoom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  
  <!-- Core Modules -->
  <script src="js/core/state-manager.js"></script>
  <script src="js/core/ai-engine.js"></script>
  <script src="js/core/analytics-engine.js"></script>
  <script src="js/core/sync-engine.js"></script>
  
  <!-- Feature Modules -->
  <script src="js/features/transactions.js"></script>
  <script src="js/features/categories.js"></script>
  <script src="js/features/planner.js"></script>
  <script src="js/features/debt.js"></script>
  <script src="js/features/analytics.js"></script>
  <script src="js/features/voice-commands.js"></script>
  <script src="js/features/notifications.js"></script>
  
  <!-- UI Modules -->
  <script src="js/ui/charts.js"></script>
  <script src="js/ui/animations.js"></script>
  <script src="js/ui/modals.js"></script>
  <script src="js/ui/toasts.js"></script>
  
  <!-- Utils -->
  <script src="js/utils/helpers.js"></script>
  <script src="js/utils/formatters.js"></script>
  <script src="js/utils/validators.js"></script>
  
  <!-- Main App -->
  <script src="js/app.js"></script>
</body>
</html>

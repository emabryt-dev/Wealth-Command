/* =================================================
   styles.css â€” Updated: notifications, no toasts,
   performance optimizations, dark-mode support
   ================================================= */

:root{
  /* Colors */
  --primary:#0d6efd;
  --success:#198754;
  --danger:#dc3545;
  --info:#0dcaf0;
  --muted:#6c757d;
  --bg:#f8f9fa;
  --card:#ffffff;
  --border:#dee2e6;
  --text:#212529;

  /* Dark mode overrides (applied when body.dark-mode) */
  --dark-bg:#1a1a1a;
  --dark-card:#2d3748;
  --dark-border:#4a5568;
  --dark-text:#e6eef8;

  /* Spacing */
  --s1:0.25rem;
  --s2:0.5rem;
  --s3:0.75rem;
  --s4:1rem;
  --s5:1.5rem;

  /* Radii & shadows */
  --r-sm:0.4rem;
  --r-md:0.8rem;
  --shadow-sm: 0 2px 6px rgba(0,0,0,0.06);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.09);
}

/* -------------------------
   Global
   ------------------------- */
* { box-sizing: border-box; }
html,body { height:100%; }
body {
  margin:0;
  font-family: "Inter", "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
  font-size: 0.97rem;
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Dark mode - class toggled via JS */
body.dark-mode {
  background: var(--dark-bg);
  color: var(--dark-text);
}
body.dark-mode .card,
body.dark-mode .breakdown-card,
body.dark-mode .table-container,
body.dark-mode .distribution-card {
  background: var(--dark-card);
  border-color: var(--dark-border);
  color: var(--dark-text);
}

/* -------------------------
   Navbar (kept original structure but optimized)
   ------------------------- */
.navbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 1rem;
  padding: 0.45rem 1rem;
  background: var(--card); /* keep clean solid bg for perf */
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 0;
  z-index: 1050;
}

.navbar .container-fluid { display:flex; align-items:center; gap:1rem; width:100%; }

/* logo/brand */
.navbar .navbar-brand {
  font-weight:700;
  color: var(--primary);
  text-decoration: none;
}

/* notification icons area (next to profile) */
.notification-icons {
  display:flex;
  align-items:center;
  gap: 0.6rem;
  margin-right: 0.25rem;
}
.notification-icon {
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:36px;
  height:36px;
  font-size:1rem;
  border-radius:8px;
  color: var(--muted);
  cursor:pointer;
  transition: background 0.15s, color 0.15s, transform 0.12s;
}
.notification-icon:hover { background: rgba(0,0,0,0.03); color: var(--primary); transform: translateY(-1px); }
.notification-icon .notification-badge {
  position:absolute;
  top: 4px;
  right: 4px;
  background: var(--danger);
  color:#fff;
  font-size:0.65rem;
  padding: 0.12rem 0.36rem;
  border-radius:12px;
  line-height:1;
}

/* small dropdown container used to show notifications */
.notification-dropdown {
  position:absolute;
  top: 48px;
  right: 0;
  min-width: 300px;
  max-width: 420px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 0.6rem;
  box-shadow: var(--shadow-md);
  padding: 0.5rem;
  display:none;
  z-index: 1100;
}
.notification-dropdown.visible { display:block; }
.notification-dropdown .nd-header { display:flex; justify-content:space-between; align-items:center; padding:0.25rem 0.5rem; border-bottom:1px solid var(--border); font-weight:600; }
.notification-dropdown .nd-list { max-height: 260px; overflow:auto; padding:0.25rem 0; }
.notification-dropdown .nd-item {
  display:flex; gap:0.5rem; align-items:flex-start; padding:0.5rem; border-radius:0.4rem;
  transition: background 0.12s;
}
.notification-dropdown .nd-item:hover { background: rgba(0,0,0,0.03); }
.notification-dropdown .nd-item .nd-icon { min-width:28px; text-align:center; }
.notification-dropdown .nd-item .nd-body { flex:1; }
.notification-dropdown .nd-item small { color: var(--muted); }

/* -------------------------
   Common UI components (cards/buttons/etc.)
   ------------------------- */
.card {
  background: var(--card);
  border-radius: var(--r-md);
  padding: 1rem;
  margin-bottom: 1rem;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
}

.card-title { font-size:1.05rem; margin:0 0 0.5rem 0; font-weight:600; }

/* buttons */
.btn { font-size:0.95rem; padding:0.35rem 0.7rem; border-radius:0.45rem; }
.btn-sm { padding:0.25rem 0.5rem; font-size:0.88rem; }

/* inputs */
.input-group-text { font-size:0.95rem; }
.form-select, .form-control { font-size:0.93rem; height:2rem; padding:0.25rem 0.5rem; }

/* -------------------------
   Rollover balance
   ------------------------- */
.rollover-balance {
  background: linear-gradient(135deg, #eaf6ff, #f8f9ff);
  border-left: 4px solid #2196f3;
  padding: 0.75rem;
  border-radius: 0.5rem;
  margin-bottom: 1rem;
}
.rollover-positive{ background: linear-gradient(135deg,#e8f5e8,#f1f8e9); border-left-color:#4caf50; }
.rollover-negative{ background: linear-gradient(135deg,#ffebee,#fce4ec); border-left-color:#f44336; }

/* -------------------------
   Breakdown cards
   ------------------------- */
.breakdown-container {
  display:flex;
  gap:1rem;
  flex-wrap:wrap;
  margin-bottom:1rem;
}
.breakdown-card { flex:1; min-width:280px; display:flex; flex-direction:column; overflow:hidden; }
.card-header-enhanced {
  padding:0.9rem 1rem; font-weight:600; border-bottom:1px solid var(--border); background:transparent;
}

/* breakdown list and items */
.breakdown-list { padding:0.8rem; overflow:auto; }
.breakdown-item { display:flex; justify-content:space-between; align-items:center; padding:0.7rem 0.5rem; border-bottom:1px solid var(--border); }
.breakdown-item:last-child{ border-bottom:none; }
.breakdown-item:hover{ background: rgba(0,0,0,0.02); }

/* income/expense accent */
.income-card { border-left:4px solid var(--success); }
.expense-card { border-left:4px solid var(--danger); }

/* -------------------------
   Transactions Table
   ------------------------- */
.table-container { border: 1px solid var(--border); border-radius:0.6rem; overflow:auto; }
#transactionsTable { width:100%; min-width:100%; border-collapse:collapse; }
#transactionsTable thead th { position: sticky; top:0; background:var(--bg); z-index:10; border-bottom:2px solid var(--border); }
#transactionsTable td, #transactionsTable th { padding:0.6rem 0.5rem; vertical-align:middle; border-bottom: 1px solid var(--border); }
.clickable-row { cursor:pointer; transition: background 0.12s, transform 0.06s; }
.clickable-row:hover { background: rgba(13,110,253,0.03); transform: translateY(-0.5px); }

/* tooltip-like fulltext on hover for description (kept) */
.description-cell { position:relative; }
.description-cell:hover::after {
  content: attr(data-fulltext);
  position:absolute; bottom:100%; left:0; background:#333; color:#fff; padding:0.35rem; border-radius:4px; width:240px; z-index:1200; font-size:0.82rem;
}

/* -------------------------
   Chart / distribution cards
   ------------------------- */
.chart-card, .distribution-card { border-radius:0.8rem; overflow:hidden; box-shadow:var(--shadow-sm); border:1px solid var(--border); background:var(--card); }
.chart-controls { padding:0.8rem; background:var(--bg); border-bottom:1px solid var(--border); }

/* -------------------------
   Modal tweaks (Bootstrap modals are still used)
   ------------------------- */
.modal-content { font-size:0.95rem; }

/* -------------------------
   Settings area
   ------------------------- */
#categorySettingsPanel { margin-top:0.5rem; }

/* -------------------------
   Smaller view / responsive
   ------------------------- */
@media(max-width:768px){
  .breakdown-container { flex-direction:column; }
  .notification-dropdown { right: 10px; left: auto; min-width: 280px; }
  #transactionsTable td, #transactionsTable th { font-size:0.88rem; padding:0.5rem; }
}

/* -------------------------
   Print-safe
   ------------------------- */
@media print{
  .navbar, #fixedNavBar, .notification-dropdown { display:none !important; }
}

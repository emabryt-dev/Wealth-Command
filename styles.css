/* --- THEME & LAYOUT VARIABLES --- */
:root {
  /* Colors */
  --c-background: #f8f9fa;
  --c-text: #212529;
  --c-text-muted: #6c757d;
  --c-white: #ffffff;
  --c-primary: #4361EE;
  --c-success: #10B981;
  --c-danger: #EF476F;
  --c-warning: #FF9E6D;

  /* Gradients */
  --gradient-primary: linear-gradient(135deg, #4361EE 0%, #7209B7 100%);
  --gradient-primary-hover: linear-gradient(135deg, #3A56D4 0%, #651A9F 100%);
  --gradient-success: linear-gradient(135deg, #10B981 0%, #06D6A0 100%);
  --gradient-danger: linear-gradient(135deg, #EF476F 0%, #FF9E6D 100%);
  --gradient-income-header: linear-gradient(135deg, #10B981, #06D6A0);
  --gradient-expense-header: linear-gradient(135deg, #EF476F, #FF9E6D);

  /* Glassmorphism & Opacity */
  --glass-bg-nav: rgba(255, 255, 255, 0.85);
  --glass-bg-card: rgba(255, 255, 255, 0.8);
  --glass-bg-modal: rgba(255, 255, 255, 0.9);
  --glass-border: 1px solid rgba(255, 255, 255, 0.3);

  /* Sizing & Spacing */
  --font-size-base: 0.97rem;
  --font-size-sm: 0.85rem;
  --font-size-lg: 1.1rem;
  --radius-md: 1rem;
  --radius-lg: 1.5rem;
  --nav-bottom-height: 70px;
  --content-padding-bottom: 90px;

  /* Shadows */
  --shadow-nav: 0 -8px 32px rgba(0, 0, 0, 0.1);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.1);
  --shadow-card-hover: 0 12px 40px rgba(0, 0, 0, 0.15);
  --shadow-btn-primary: 0 4px 16px rgba(67, 97, 238, 0.3);

  /* Transitions */
  --transition-fast: all 0.2s ease-in-out;
  --transition-base: all 0.3s ease;
}

/* --- DARK MODE THEME --- */
body.dark-mode {
  --c-background: #121212;
  --c-text: #e0e0e0;
  --c-text-muted: #9e9e9e;

  --glass-bg-nav: rgba(30, 30, 30, 0.85);
  --glass-bg-card: rgba(30, 30, 30, 0.8);
  --glass-bg-modal: rgba(30, 30, 30, 0.9);
  --glass-border: 1px solid rgba(255, 255, 255, 0.1);

  --shadow-nav: 0 -8px 32px rgba(0, 0, 0, 0.4);
  --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.4);
}

/* --- BASE STYLES --- */
body {
  background-color: var(--c-background);
  color: var(--c-text);
  font-size: var(--font-size-base);
  padding-bottom: var(--content-padding-bottom);
  transition: background-color var(--transition-base), color var(--transition-base);
}

.main-content {
  padding-bottom: var(--content-padding-bottom);
}

.tab-page.d-none {
  display: none;
}

/* --- NAVIGATION BARS --- */
.navbar {
  background: var(--glass-bg-nav);
  border-bottom: var(--glass-border);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: var(--shadow-card);
  z-index: 1030;
}

.navbar-brand, .navbar-nav .nav-link {
  color: var(--c-text);
  font-weight: 500;
}

#fixedNavBar {
  background: var(--glass-bg-nav);
  border-top: var(--glass-border);
  backdrop-filter: blur(30px);
  -webkit-backdrop-filter: blur(30px);
  box-shadow: var(--shadow-nav);
  height: var(--nav-bottom-height);
  width: 95%;
  left: 2.5%;
  border-radius: 20px;
  position: fixed;
  bottom: 10px;
  z-index: 1030;
}

.nav-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: var(--c-text-muted);
  background: transparent;
  border: none;
  flex: 1;
  min-height: var(--nav-bottom-height);
  transition: var(--transition-base);
}

.nav-btn.active {
  color: var(--c-primary);
  background: rgba(67, 97, 238, 0.1);
}

/* --- CARDS & PANELS --- */
.card {
  background: var(--glass-bg-card);
  border: var(--glass-border);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  box-shadow: var(--shadow-card);
  border-radius: var(--radius-md);
}

.breakdown-card {
  cursor: pointer;
  transition: var(--transition-base);
  padding: 0;
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.breakdown-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-card-hover);
}

.card-header-enhanced {
  padding: 1.2rem;
  font-weight: 600;
  color: var(--c-white);
}
.income-card .card-header-enhanced { background: var(--gradient-income-header); }
.expense-card .card-header-enhanced { background: var(--gradient-expense-header); }

/* --- BUTTONS --- */
.btn {
  border-radius: 0.75rem;
  transition: var(--transition-base);
  border: none;
}

.btn-primary {
  background: var(--gradient-primary);
  color: var(--c-white);
  box-shadow: var(--shadow-btn-primary);
}
.btn-primary:hover {
  background: var(--gradient-primary-hover);
  transform: translateY(-2px);
}

.btn-success { background: var(--gradient-success); color: var(--c-white); }
.btn-danger { background: var(--gradient-danger); color: var(--c-white); }

/* --- MODALS --- */
.modal-content {
  background: var(--glass-bg-modal);
  border: var(--glass-border);
  backdrop-filter: blur(30px);
  border-radius: var(--radius-lg);
  color: var(--c-text);
}

.modal-header { border-bottom: 1px solid var(--glass-border); }
.modal-footer { border-top: 1px solid var(--glass-border); }

body.dark-mode .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }

/* --- FORMS --- */
.form-control,
.form-select,
.input-group-text {
  background-color: var(--glass-bg-card);
  border: var(--glass-border);
  color: var(--c-text);
  backdrop-filter: blur(10px);
}

.form-control:focus,
.form-select:focus {
  background-color: var(--glass-bg-card);
  border-color: var(--c-primary);
  color: var(--c-text);
  box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
}

/* --- TRANSACTIONS TABLE --- */
.table-container {
  height: calc(100vh - 280px);
  overflow: auto;
  border: var(--glass-border);
  border-radius: var(--radius-lg);
}

.table {
  --bs-table-color: var(--c-text);
  --bs-table-bg: transparent;
  --bs-table-border-color: var(--glass-border);
  --bs-table-striped-bg: rgba(0, 0, 0, 0.02);
  --bs-table-hover-bg: rgba(0, 0, 0, 0.05);
}

body.dark-mode .table {
  --bs-table-striped-bg: rgba(255, 255, 255, 0.02);
  --bs-table-hover-bg: rgba(255, 255, 255, 0.05);
}

#transactionsTable thead th {
  position: sticky;
  top: 0;
  background-color: var(--glass-bg-nav); /* Use nav bg for header */
  backdrop-filter: blur(10px);
  z-index: 10;
}

#transactionsTable td {
    vertical-align: middle;
}

.clickable-row {
  cursor: pointer;
}

/* --- ANALYTICS SPECIFIC STYLES --- */
.health-score-value,
.savings-rate-value,
.ai-metric-value {
  font-weight: bold;
}
.health-score-value { font-size: 2.5rem; }
.health-score-value.excellent { color: var(--c-success); }
.health-score-value.good { color: #06D6A0; }
.health-score-value.fair { color: var(--c-warning); }
.health-score-value.poor { color: var(--c-danger); }

.analytics-nav .nav-link {
  border-radius: 0.75rem;
  transition: var(--transition-base);
  background: var(--glass-bg-card);
  border: var(--glass-border);
  color: var(--c-text-muted);
}
.analytics-nav .nav-link.active {
  background: var(--gradient-primary);
  color: var(--c-white);
  transform: translateY(-2px);
  box-shadow: var(--shadow-btn-primary);
}

/* --- DEBT MANAGEMENT SPECIFIC STYLES --- */
#tab-debt .card .card-body .row .col-6 .card,
#tab-debt .card .card-body .row .col-md-3 .card {
    height: 100%;
    min-height: 120px;
}
#netDebtPosition {
    font-size: 1.4rem;
    color: var(--c-primary);
}

/* --- MISC & HELPERS --- */
.text-success { color: var(--c-success) !important; }
.text-danger { color: var(--c-danger) !important; }
.text-warning { color: var(--c-warning) !important; }
.text-primary { color: var(--c-primary) !important; }
.text-muted { color: var(--c-text-muted) !important; }

/* Responsive Adjustments */
@media (max-width: 768px) {
  #fixedNavBar {
    border-radius: 0;
    width: 100%;
    left: 0;
    bottom: 0;
  }
  body {
    padding-bottom: var(--nav-bottom-height);
  }
}
